<!-- <app-update-user-account [childMessage]=parentMessageL></app-update-user-account> -->
<!-- <app-modal-users [childMessage]=parentMessage></app-modal-users> -->

<body>
    <!-- mensaje -->
    <!-- Conectamos el formulario de la clase .ts llamado loginForm con nuestro formulario HTML y además definimos una función submit, (ngSubmit="onLogin(loginForm.value)") -->
    <form ngNativeValidate [formGroup]="loginForm" (ngSubmit)="onLogin(loginForm.value)">
        <div class="form">
            <h1>Iniciar sesión</h1>
            <div class="grupo">
                <input type="email" id="email" required formControlName="email"[ngClass]="(loginForm.get('email')?.touched || loginForm.get('email')?.dirty) &&
                loginForm.get('email')?.errors ? 'is-invalid' : '' || loginForm.get('email')?.hasError('email')
                ? 'is-invalid' : ''"><span class="barra"></span>
                <label for="">Email</label>
                <div class="invalid-feedback">
                    {{ loginForm.get("email")?.hasError("required") ? "Campo requerido" : "" }}
                    {{ loginForm.get("email")?.hasError("email") ? "Campo de email persona@example.com" : "" }}
                </div>
            </div>

            <div class="grupo">
                <input type="password" name="" id="password" required formControlName="password" [ngClass]="(loginForm.get('password')?.touched || loginForm.get('password')?.dirty) &&
                loginForm.get('password')?.hasError('required') ? 'is-invalid' : '' || loginForm.get('password')?.hasError('maxlength')
                ? 'is-invalid' : '' || loginForm.get('password')?.hasError('minlength')
                ? 'is-invalid' : ''"><span class="barra"></span>
                <label for="">Contraseña</label>
                <div class="invalid-feedback">
                    {{ loginForm.get("password")?.hasError("required") ? "Campo requerido" : "" }}
                    {{ loginForm.get("password")?.hasError("maxlength") ? "Máximo 12 caracteres" : "" }}
                    {{ loginForm.get("password")?.hasError("minlength") ? "Mínimo 6 caracteres" : "" }}
                </div>
            </div>

            <!-- <button (click)="login()">Iniciar</button> -->
            <button *ngIf="loginForm.invalid" type="submit" class="btnIniciarDisabled" [disabled]="loginForm.invalid">Iniciar</button>
            <button *ngIf="loginForm.valid" type="submit" class="btnIniciar">Iniciar</button>
            <button class="btnIniciar" (click)="register()">Crear cuenta</button>

            <div class="a-divider text-center ">
                <div class="forgot">
                    <!-- <a [routerLink]="['forgot-password']">¿Olvidaste tu contraseña?</a> -->
                    <a (click)="recuperarPassword()">¿Olvidaste tu contraseña?</a>
                </div>
                <div class="supplier">
                    <a (click)="solicitudProveedor()">¿Quiéres ser proveedor?</a>
                </div>
            </div>
            <!-- <pre>{{ loginForm.value | json }}</pre> -->
        </div>
    </form>

    <!-- Creamos div que se muestre unicamente cuando exista un error.
    Para mostrarlo cuando hay un error definimos un ngIf que nos permite saber si la variable errorStatus cambia, en el momento en el que haga login de manera incorrecta, se va convertir en true y va a mostrar el contenido del div. -->
    <div class="alert alert-danger" *ngIf="errorStatus">
        <!-- Mostramos la variable donde vienen los textos o el error -->
        <p>{{errorMsg}}</p>
    </div>

</body>


<!-- <pre>{{ formUsers.value | json }}</pre> -->